# 노드의 홈 부분을 식별하는 방법.md

##  ■■ Description ■■
- 특정 노드(부품)의 **홈(Groove/Hole) 부분을 식별**하고 그 테두리에 시각적 효과를 주는 방법에 대해 설명한다.
## 1. 구현 가능 여부 및 전략
- 구현 가능하다. 하지만 3D 모델의 데이터 구조에 따라 접근 방식이 달라진다. 
- '홈'이라는 부위는 기하학적으로는 메시(Mesh)의 오목한 부분일 뿐이므로, 
  **이를 자동으로 인식하기 위해서는** 다음 두 가지 전략 중 하나를 선택해야 한다.
### 1-1. 전략 A: EdgesGeometry를 활용한 외곽선 추출 (추천)
- Three.js의 `EdgesGeometry`를 사용하여 특정 각도(threshold) 이상으로 꺾인 모서리를 추출한다. 
- **홈 부분은 급격한 각도 변화가 있는 경우가 많으므로**, 이 방식으로 테두리 라인을 생성할 수 있다.
### 1-2. 전략 B: 데이터 기반의 특정 노드 타겟팅
- 만약 홈 부분이 별도의 노드로 분리되어 있거나, 특정 이름 규칙을 가지고 있다면 해당 노드의 **Bounding Box**를 추출하여 
  그 주변에 하이라이트를 표시 할 수 있다.
## 2. GSAP 및 관련 라이브러리 활용 방안
- **GSAP (GreenSock):**
	- 테두리의 **두께, 색상, 투명도 또는 드로잉 애니메이션(DrawSVG와 유사한 효과)** 을 처리할 때 매우 강력하다. 
	- 단순히 선을 그리는 것에 그치지 않고, 사용자의 시선을 끌 수 있는 맥동(Pulsing) 효과를 줄 때 필수적이다.
- **@react-three/drei:**
	- `Outlines` 컴포넌트나 `Edges` 컴포넌트를 사용하여 코드 몇 줄만으로 복잡한 외곽선 로직을 대체할 수 있다.
## 3. 구현 시 고려사항
1. **성능 최적화:** 
	- 모든 부품에 대해 `EdgesGeometry`를 생성하면 연산 비용이 높다.
	- 하이라이트가 필요한 순간(클릭 혹은 가이드 시점)에만 동적으로 생성하고 해제하는 라이프사이클 관리가 필요하다.
2. **좌표계 일치:** 
	- `getPreciseBoundingBox` 함수를 사용하여, 하이라이트 객체가 실제 부품의 **World Matrix**를 정확히 따르도록 `applyMatrix4`를 적용해야 한다.
3. **시각적 명인성:** 
	- 단순한 선보다는 `@react-three/drei`의 `Selection`과 `EffectComposer`를 이용한 **Outline Pass(외곽선 후처리)** 방식을 병행하면 훨씬 더 전문적인 '전자 매뉴얼' 느낌을 줄 수 있다.
